# Cost
Приложение для учета расходов.
На текущий момент приложение способно записывать расходы пользователя введенные в формате целого числа и присваивать категорию , к которой отсносится введенный расход. Цель проекта - оперативная возможность ведения учета своих расходов. Мы стремимся создать систему, требующую минимальное количество действий от пользователя для ведения учета. API настроено на работу с телеграмм ботом. Ссылка на тестовую версию бота: @MoneyControlSuperBot . По запросу пользователя (команда: /check) бот выводит суммы расходов в разбивке по категориям (пока без возможности фильтрации по временным периодам и иным полям). Код организации работы телеграмм бота находится в двух файлах: telegram_bot - основной код, getapi - функции взаимодействия с API. В API заведено три тестовых группы расходов. API доступен по адресу: http://dmitrypetukhov90.pythonanywhere.com/ .

Что предполагается доработать в первую очередь:
* добавить обработку исключений
* добавить новые категории расходов
* разработать функционал для предоставления пользователям возможности создания собственных категорий расходов
* добавить возможность фильтрации вывода статистики расходов по датам (день, неделя, месяц и т.д.)
* добавить возможность добавления собственного примечания при внесении нового расхода
* добавить возмоность изменять ранее внесенные расходы
* добавить возможность добавления фото покупки или чека к введенному расходу
* доработать внешний вид бота (инлайн кнопки, добавление иконок к каждому виду расходов и т.д.)
* добавить графическое отображение статистики расходов (диаграммы, графики)
* в общем куча планов

Сейчас проект работает в своей первой тестовой версии - тестируется работоспособность основных модулей и функций системы. 
Описание текущего проекта доступно по ссылке: https://dmitrypetukhov90.pythonanywhere.com/swagger/  (почему то не работает - нужно подключить аутентификацию).

Упрощенная последовательность действий при работе проекта на текущий момент выглядит следующим образом:
1) Пользователь отправляет текстовым сообщением сумму расхода (только целые числа)
2) Бот настроен на обработку только числовых сообщений, на остальные сообщения реакция отсутствует (в будущем планируется добавить напоминание о том, что бот работает только с целыми числами)
3) После получения сообщения, содержащее целое число, запускается диалог с пользователем с целью присвоения введенному расходу категории
4) После присвоения категории Бот отправляет данные POST запросом в API
5) В обязательном порядке к данным по расходу присваивается chat id пользователя
6) После валидации данных, происходит запись в базу данных
7) Доступ к базе данных расходов из телеграмм бота возможен только по chat id - таким образом исключается возможность запроса чужих данных другими пользователями

* Установка, настройка:

Клонируйте репозиторий, установите и активируйте виртуальное окружение:

Win:
```
python -m venv venv
venv/Scripts/activate
```
Mac:
```
python3 -m venv venv
source venv/bin/activate
```
Установите зависимости из файла requirements.txt
```
pip install -r requirements.txt
```
Создайте файл .env и сохраните в нем TELEGRAM_TOKEN (токен бота), USER и PASSWORD (зарегестрированный на API пользователь и пароль). Регистрация пользователя производится по POST запросу на https://your_domen.com/auth/users/:
```
{
    "username": "username",
    "password": "password"
}
```

Запустите бота.
